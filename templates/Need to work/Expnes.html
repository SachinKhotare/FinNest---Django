<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Monthly Expense Overview</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      background-color: #f8f9fa;
    }

    .month-title {
      font-size: 1.2rem;
      color: #0d6efd;
    }

    .high-expense {
      background-color: #ffe5e5 !important;
      font-weight: bold;
    }

    .filter-section {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .summary-card {
      border-radius: 10px;
      padding: 15px;
      background: #ffffff;
      box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body>
  <div class="container mt-4">
    <div class="card shadow p-3 mb-4 bg-body rounded">
      <div class="row">
        <h3 class="mb-3 text-primary">üìä Monthly Expense Overview</h3>

        <!-- Filter Section -->
        <div class="filter-section">
          <input type="text" id="searchInput" class="form-control w-auto" placeholder="üîç Search expense">
          <select id="categoryFilter" class="form-select w-auto">
            <option value="">All Categories</option>
            <option value="Utilities">Utilities</option>
            <option value="Food">Food</option>
            <option value="Transport">Transport</option>
            <option value="Rent">Rent</option>
            <option value="Shopping">Shopping</option>
          </select>
        </div>

        <!-- Current Month -->
        <div class="col-12">
          <div class="month-title"><b>üìå Current Month Expenses</b></div>
          <table class="table table-striped table-bordered mt-2 expense-table">
            <thead class="table-light">
              <tr>
                <th onclick="sortTable(0, this)">Expense ‚¨ç</th>
                <th onclick="sortTable(1, this)">Amount ‚¨ç</th>
                <th>Category</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><i class="fa-solid fa-bolt"></i> Electricity Bill</td>
                <td>‚Çπ1200</td>
                <td>Utilities</td>
                <td>2025-05-05</td>
              </tr>
              <tr>
                <td><i class="fa-solid fa-utensils"></i> Lunch at Office</td>
                <td>‚Çπ400</td>
                <td>Food</td>
                <td>2025-05-06</td>
              </tr>
              <tr>
                <td><i class="fa-solid fa-bus"></i> Bus Pass</td>
                <td>‚Çπ1500</td>
                <td>Transport</td>
                <td>2025-05-08</td>
              </tr>
              <tr class="high-expense">
                <td><i class="fa-solid fa-cart-shopping"></i> Groceries</td>
                <td>‚Çπ3200</td>
                <td>Food</td>
                <td>2025-05-10</td>
              </tr>
            </tbody>
            <tfoot>
              <tr class="table-secondary">
                <td colspan="4" id="totalCurrent">Total: ‚Çπ0</td>
              </tr>
            </tfoot>
          </table>
        </div>

        <!-- Summary Section -->
        <div class="col-12 mt-3">
          <div class="summary-card">
            <h5 class="text-primary">üìà Expense Summary</h5>
            <p id="currentMonthSummary" class="mb-1"></p>
            <p id="overallSummary" class="mb-0"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const overallExpenses = [
      { name: "Electricity Bill", amount: 1200 },
      { name: "Lunch at Office", amount: 400 },
      { name: "Bus Pass", amount: 1500 },
      { name: "Groceries", amount: 3200 },
      { name: "Gas Bill", amount: 1000 },
      { name: "Rent", amount: 5000 },
      { name: "Dinner Out", amount: 850 },
      { name: "Shopping", amount: 1000 }
    ];

    // Calculate totals
    function calculateTotals() {
      let currentTotal = 0;
      document.querySelectorAll(".expense-table tbody tr").forEach(row => {
        let amount = parseInt(row.cells[1].innerText.replace("‚Çπ", "").trim());
        currentTotal += amount;
      });
      document.getElementById("totalCurrent").innerText = "Total: ‚Çπ" + currentTotal;

      let overallTotal = overallExpenses.reduce((sum, exp) => sum + exp.amount, 0);

      // Update summary
      document.getElementById("currentMonthSummary").innerText = `üí∞ Current Month Total: ‚Çπ${currentTotal}`;
      document.getElementById("overallSummary").innerText = `üìä Overall Total: ‚Çπ${overallTotal}`;
    }
    calculateTotals();

    // Search & Filter
    document.getElementById("searchInput").addEventListener("keyup", filterTable);
    document.getElementById("categoryFilter").addEventListener("change", filterTable);

    function filterTable() {
      let searchValue = document.getElementById("searchInput").value.toLowerCase();
      let categoryValue = document.getElementById("categoryFilter").value;

      document.querySelectorAll(".expense-table tbody tr").forEach(row => {
        let expense = row.cells[0].innerText.toLowerCase();
        let category = row.cells[2].innerText;
        let show = true;

        if (!expense.includes(searchValue)) show = false;
        if (categoryValue && category !== categoryValue) show = false;

        row.style.display = show ? "" : "none";
      });
    }

    // Sort table
    function sortTable(columnIndex, thElement) {
      let table = thElement.closest("table");
      let rows = Array.from(table.tBodies[0].rows);
      let ascending = thElement.getAttribute("data-asc") !== "true";
      rows.sort((a, b) => {
        let valA = a.cells[columnIndex].innerText.replace("‚Çπ", "").trim();
        let valB = b.cells[columnIndex].innerText.replace("‚Çπ", "").trim();

        if (!isNaN(valA) && !isNaN(valB)) {
          return ascending ? valA - valB : valB - valA;
        }
        return ascending ? valA.localeCompare(valB) : valB.localeCompare(valA);
      });

      thElement.setAttribute("data-asc", ascending);
      rows.forEach(row => table.tBodies[0].appendChild(row));
    }
  </script>

</body>
</html>
