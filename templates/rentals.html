  <div class="container my-4">
    <!-- Modal Triggers -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5>Tenant Management</h5>
      <div>
        <button class="btn btn-success me-2" data-bs-toggle="modal" data-bs-target="#addTenantModal">Add Tenant</button>
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteTenantModal">Delete Tenant</button>
      </div>
    </div>

    <!-- Add Tenant Modal -->
    <div class="modal fade" id="addTenantModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add Tenant</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="row g-3">
                <div class="col-md-6"><label class="form-label">Tenant Name</label><input type="text" class="form-control"></div>
                <div class="col-md-6"><label class="form-label">Monthly Rent</label><input type="number" class="form-control"></div>
                <div class="col-md-6"><label class="form-label">Agreement Start Date</label><input type="date" class="form-control"></div>
                <div class="col-md-6"><label class="form-label">Agreement End Date</label><input type="date" class="form-control"></div>
                <div class="col-md-12"><label class="form-label">Upload Agreement</label><input type="file" class="form-control"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button class="btn btn-success">Save</button>
            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete Tenant Modal -->
    <div class="modal fade" id="deleteTenantModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Delete Tenant</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <label>Select Tenant to Delete</label>
            <select class="form-select">
              <option>Amit Sharma</option>
              <option>Priya Nair</option>
              <option>Rahul Mehta</option>
            </select>
          </div>
          <div class="modal-footer">
            <button class="btn btn-danger">Delete</button>
            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs mt-4" id="tenantTabs" role="tablist">
      <li class="nav-item" role="presentation"><button class="nav-link active" id="amit-tab" data-bs-toggle="tab" data-bs-target="#amit" type="button" role="tab">Amit Sharma - Flat No. 101</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" id="priya-tab" data-bs-toggle="tab" data-bs-target="#priya" type="button" role="tab">Priya Nair</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" id="rahul-tab" data-bs-toggle="tab" data-bs-target="#rahul" type="button" role="tab">Rahul Mehta</button></li>
    </ul>

    <div class="tab-content border rounded p-3" id="tenantTabsContent">
      <!-- Amit -->
      <div class="tab-pane fade show active" id="amit" role="tabpanel">
          <div class="d-flex justify-content-between align-items-center">
  <h6 class="text-info mb-0">Agreement Details</h6>
  <button class="btn btn-primary btn-sm" onclick="exportTenantData('Amit Sharma')">
    <i class="bi bi-file-earmark-excel"></i> Export to Excel
  </button>
</div>
<p class="mt-2"><strong>Rent:</strong> ₹18,000 | <strong>Period:</strong> 15-Feb-2024 to 14-Feb-2025 | <strong>Contact:</strong> +91-9876543210 | <strong>Address:</strong> Malad East </p>
<div class="alert alert-warning">Agreement expiring in 90 days</div>
        <h6 class="text-primary">Rent Status (11-Month Table)</h6>
        
          <table class="table table-sm table-bordered mb-3" id="amitRentTable">
        <thead class="table-light">
          <tr>
            <th>Month</th>
            <th>Rent Amount (₹)</th>
            <th>Status</th>
            <th>Note</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Jan 2025</td>
            <td><input type="number" class="form-control form-control-sm" value="18000" readonly></td>
            <td><span class="badge bg-danger">Pending</span></td>
            <td class="note-cell"></td>
            <td>
              <select class="form-select form-select-sm" onchange="handleAction(this)">
                <option selected disabled>Choose</option>
                <option value="Paid">Mark as Paid</option>
                <option value="Pending">Mark as Pending</option>
                <option value="Not Paid">Mark as Not Paid</option>
                <option value="Half Paid">Half Paid</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>Feb 2025</td>
            <td><input type="number" class="form-control form-control-sm" value="18000" readonly></td>
            <td><span class="badge bg-success">Paid</span></td>
            <td class="note-cell">Paid on time</td>
            <td>
              <select class="form-select form-select-sm" onchange="handleAction(this)">
                <option selected disabled>Choose</option>
                <option value="Paid">Mark as Paid</option>
                <option value="Pending">Mark as Pending</option>
                <option value="Not Paid">Mark as Not Paid</option>
                <option value="Half Paid">Half Paid</option>
              </select>
            </td>
          </tr>
          <!-- Add more months here as needed -->
        </tbody>
      </table>
        </table>
      
        <!-- Issues Raised Card -->
<div class="card border-danger mb-3">
  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
    <span><i class="bi bi-exclamation-circle"></i> Issues Raised</span>
    <span class="badge bg-warning text-dark">Pending</span>
  </div>
  <div class="card-body">
    <p class="mb-1"><strong>Issue:</strong> Leaking bathroom tap</p>
    <p class="mb-2"><strong>Reported:</strong> 04-Aug-2025</p>
    <button class="btn btn-sm btn-outline-success" data-bs-toggle="modal" data-bs-target="#resolveIssueModal">Mark as Resolved</button>
  </div>
</div>

<!-- Rent Delay Request Card -->
<div class="card border-warning mb-3">
  <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
    <span><i class="bi bi-clock-history"></i> Rent Delay Request</span>
    <span class="badge bg-secondary">Pending</span>
  </div>
  <div class="card-body">
    <p class="mb-1"><strong>Reason:</strong> Salary not credited</p>
    <p class="mb-2"><strong>Requested Delay:</strong> Till 20th of the month</p>
    <div class="d-flex gap-2">
      <button class="btn btn-sm btn-success">Approve</button>
      <button class="btn btn-sm btn-danger">Reject</button>
      <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editDelayModal">Edit</button>
    </div>
  </div>
</div>

      </div>


      <!-- Resolve Issue Modal -->
<div class="modal fade" id="resolveIssueModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Resolve Issue</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label class="form-label">Resolution Note</label>
        <textarea class="form-control" rows="3" placeholder="e.g., Tap fixed by plumber on 5-Aug-2025"></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success">Mark as Resolved</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Delay Request Modal -->
<div class="modal fade" id="editDelayModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Rent Delay Request</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label class="form-label">New Delay Reason</label>
        <textarea class="form-control mb-3" placeholder="e.g., Medical emergency, requesting extension till 25th."></textarea>
        <label class="form-label">New Date</label>
        <input type="date" class="form-control">
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary">Save Changes</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>


      <!-- Priya -->
      <div class="tab-pane fade" id="priya" role="tabpanel">
        <button class="btn btn-primary mb-3" onclick="exportTenantData('Priya Nair')"><i class="bi bi-file-earmark-excel"></i> Export to Excel</button>
        <p>Priya Nair details go here...</p>
      </div>

      <!-- Rahul -->
      <div class="tab-pane fade" id="rahul" role="tabpanel">
        <button class="btn btn-primary mb-3" onclick="exportTenantData('Rahul Mehta')"><i class="bi bi-file-earmark-excel"></i> Export to Excel</button>
        <p>Rahul Mehta details go here...</p>
      </div>
    </div>


     <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Export Script -->
  <script>
    function exportTenantData(name) {
      let data = [];
      if (name === "Amit Sharma") {
        data.push(["Tenant Name", "Amit Sharma"]);
        data.push(["Rent", "₹18,000"]);
        data.push(["Agreement", "15-Feb-2024 to 14-Feb-2025"]);
        data.push(["Contact", "+91-9876543210"]);
        data.push([]);
        data.push(["Month", "Status"]);
        data.push(["Jan 2025", "Pending"]);
        data.push(["Feb 2025", "Paid"]);
        data.push([]);
        data.push(["Issue", "Bathroom tap leaking"]);
        data.push([]);
        data.push(["Rent Delay Reason", "Salary not credited. Requesting delay till 20th."]);
      } else {
        data.push(["Tenant Name", name]);
        data.push(["Details not available in this demo"]);
      }

      const ws = XLSX.utils.aoa_to_sheet(data);
      const wb = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(wb, ws, name.replace(" ", "_"));
      XLSX.writeFile(wb, `${name.replace(" ", "_")}_Tenant_Details.xlsx`);
    }

    function handleAction(select) {
    const row = select.closest('tr');
    const statusCell = row.cells[2];
    const noteCell = row.querySelector('.note-cell');
    const rentInput = row.cells[1].querySelector('input');

    switch (select.value) {
      case "Paid":
        statusCell.innerHTML = '<span class="badge bg-success">Paid</span>';
        noteCell.textContent = "Paid in full";
        break;
      case "Pending":
        statusCell.innerHTML = '<span class="badge bg-warning text-dark">Pending</span>';
        noteCell.textContent = "Awaiting payment";
        break;
      case "Not Paid":
        statusCell.innerHTML = '<span class="badge bg-danger">Not Paid</span>';
        noteCell.textContent = "No payment received";
        break;
      case "Half Paid":
        const half = prompt("Enter half payment amount:");
        if (half && !isNaN(half)) {
          rentInput.value = half;
          statusCell.innerHTML = '<span class="badge bg-info text-dark">Half Paid</span>';
          noteCell.textContent = `Half paid: ₹${half}`;
        } else {
          alert("Invalid amount.");
          select.selectedIndex = 0;
        }
        break;
    }
  }

  </script>
</div>

 